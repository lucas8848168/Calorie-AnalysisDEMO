# 🍽️ 食物卡路里分析器

基于 AI 的智能食物识别和营养分析系统。上传食物图片，自动识别食物类型并计算卡路里和营养成分。

[![在线演示](https://img.shields.io/badge/演示-在线体验-blue)](https://lucas8848168.github.io/ka/)

## ✨ 功能特性

- 📸 **智能图片识别** - 上传食物图片，AI 自动识别食物类型
- 🔢 **卡路里计算** - 自动计算食物的卡路里含量
- 📊 **营养成分分析** - 显示蛋白质、脂肪、碳水化合物、膳食纤维等详细信息
- 🍽️ **餐次管理** - 按早餐、午餐、晚餐、加餐分类管理饮食记录
- 📈 **数据可视化** - 卡路里趋势图、营养雷达图、餐次分布图
- 🎯 **目标管理** - 设置健康目标，追踪进度，连续达标徽章
- ⭐ **收藏功能** - 收藏常吃食物，快速添加到餐次
- 📋 **模板管理** - 保存常用餐次组合，一键应用
- 💾 **本地存储** - 所有数据保存在浏览器本地，保护隐私
- 📱 **响应式设计** - 完美支持桌面和移动设备

## 🛠️ 技术栈

### 前端
- **框架**: React 19 + TypeScript
- **构建工具**: Vite 7
- **图表库**: Recharts
- **样式**: CSS3 响应式布局
- **状态管理**: 自定义 Hooks

### 后端
- **平台**: Cloudflare Workers (Serverless)
- **AI 能力**: 视觉识别 API
- **部署**: Cloudflare Pages + Workers

## 🚀 快速开始

### 前置要求

- Node.js 18+
- npm 或 yarn

### 1. 克隆项目

\`\`\`bash
git clone https://github.com/lucas8848168/ka.git
cd ka
\`\`\`

### 2. 安装依赖

\`\`\`bash
npm install
\`\`\`

### 3. 配置环境变量

复制 \`.env.example\` 为 \`.env\`:

\`\`\`bash
cp .env.example .env
\`\`\`

编辑 \`.env\` 文件，配置 API 端点：

\`\`\`env
VITE_API_ENDPOINT=http://localhost:8787
\`\`\`

### 4. 启动开发服务器

\`\`\`bash
npm run dev
\`\`\`

访问 http://localhost:5173 即可使用应用。

### 5. 构建生产版本

\`\`\`bash
npm run build
\`\`\`

构建产物在 \`dist/\` 目录。

## 📖 使用说明

### 基础功能

1. **上传图片** - 点击上传区域或拖拽图片（支持 JPEG、PNG、WebP，最大 10MB）
2. **查看分析结果** - AI 识别食物并显示营养信息（通常需要 30-60 秒）
3. **保存到餐次** - 选择餐次类型保存记录

### 餐次管理

4. **查看历史记录** - 按日期和餐次类型查看饮食记录
5. **快速添加** - 使用常吃食物网格或收藏快速添加
6. **模板管理** - 保存常用餐次组合，一键应用

### 数据分析

7. **查看趋势** - 卡路里趋势图、营养雷达图、餐次分布图
8. **数据摘要** - 平均每日卡路里、总餐次、营养达成情况

### 目标管理

9. **设置目标** - 选择目标类型（减重/增肌/维持/健康），设置目标体重和营养目标
10. **追踪进度** - 查看进度百分比、连续达标徽章、每日达成情况

## 🏗️ 项目架构

\`\`\`
food-calorie-analyzer/
├── src/                      # 前端源代码
│   ├── components/          # React 组件
│   │   ├── Charts/          # 图表组件
│   │   ├── Goal/            # 目标管理
│   │   ├── Meal/            # 餐次管理
│   │   └── ...
│   ├── pages/               # 页面组件
│   ├── hooks/               # 自定义 Hooks
│   ├── services/            # 业务逻辑层
│   ├── types/               # TypeScript 类型
│   ├── utils/               # 工具函数
│   └── App.tsx              # 主应用
├── workers/                  # 后端 API（未开源）
├── index.html
├── vite.config.ts
└── package.json
\`\`\`

### 核心模块

- **ImageUploader** - 图片上传和压缩
- **AnalysisDisplay** - 分析结果展示
- **MealManager** - 餐次管理系统
- **DataAnalysis** - 数据可视化
- **GoalManagement** - 目标追踪
- **StorageOptimizer** - 本地存储优化

## 📊 性能优化

- ✅ 自动图片压缩（优化 API 调用成本）
- ✅ React.memo 优化组件渲染
- ✅ useMemo 缓存计算结果
- ✅ 自动清理 30 天前的旧数据
- ✅ 智能存储管理（最大 5MB）

## 🔒 隐私保护

- 所有数据保存在浏览器本地（LocalStorage）
- 不收集用户个人信息
- 图片仅用于 AI 分析，不存储在服务器

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

ISC License

## ⚠️ 免责声明

本应用提供的营养数据仅供参考，基于 AI 模型估算，实际值可能有所不同。如需精确的营养信息，请咨询专业营养师。

---

**在线演示**: https://lucas8848168.github.io/ka/  
**最后更新**: 2025-11-20
